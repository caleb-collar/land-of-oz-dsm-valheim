#!/bin/sh
# Pre-commit hook for Land of OZ - Valheim DSM
# Runs formatting and linting checks before each commit

echo "Running pre-commit checks..."

# Check formatting and linting with Biome
echo "Checking formatting and linting..."
npx biome check .
if [ $? -ne 0 ]; then
    echo ""
    echo "❌ Biome check failed!"
    echo "Run 'npx biome check --fix .' to fix issues."
    exit 1
fi

# Type check
echo "Running type check..."
npx tsc --noEmit
if [ $? -ne 0 ]; then
    echo ""
    echo "❌ Type check failed!"
    echo "Fix the TypeScript errors above before committing."
    exit 1
fi

echo "✅ All pre-commit checks passed!"
exit 0
